# 乙组投资追踪器 - 使用文档

## 项目简介

乙组投资追踪器是一个用于展示和分析投资收益的可视化系统，支持盈利股票、亏损股票、未中签股票的统计分析，以及操作方和投资方的收益分配计算。

## 快速启动

### 本地运行
```bash
cd /Users/wright/Documents/WFCode/GangGu-yizu
python3 -m http.server 8001
```

然后在浏览器访问：http://localhost:8001/index.html

### 登录密码
默认密码：`yizu2026`（可在 data.json 中修改）

## 如何更新数据

### 第一步：编辑 data.json 文件

使用任何文本编辑器打开 `data.json` 文件，根据需要修改以下内容：

#### 1. 更新日期
```json
"generated_at": "2026-01-22"
```
修改为当前日期。

#### 2. 添加/修改盈利股票
在 `profit_stocks` 数组中添加或修改股票：

```json
{
  "name": "股票名称",
  "revenue": 盈利金额
}
```

**如果是 2025.12.09 之后的股票**（使用特殊投资比例），需要添加 `special_investors` 字段：
```json
{
  "name": "股票名称",
  "revenue": 盈利金额,
  "special_investors": true
}
```

**示例**：
```json
"profit_stocks": [
  {
    "name": "IFBH",
    "revenue": 7356.6
  },
  {
    "name": "英矽智能(500股)",
    "revenue": 9208,
    "special_investors": true
  }
]
```

#### 3. 添加/修改亏损股票
在 `loss_stocks` 数组中添加或修改股票：

```json
{
  "name": "股票名称",
  "loss": 亏损金额
}
```

**示例**：
```json
"loss_stocks": [
  {
    "name": "海天酱油",
    "loss": 1785.8
  },
  {
    "name": "三花智控",
    "loss": 677.74858
  }
]
```

#### 4. 添加/修改未中签股票
在 `not_won_stocks` 数组中添加或修改股票：

```json
{
  "name": "股票名称",
  "cost": 认购费用
}
```

**示例**：
```json
"not_won_stocks": [
  {
    "name": "双登",
    "cost": 100
  },
  {
    "name": "龙旗科技",
    "cost": 0
  }
]
```

### 第二步：保存文件

保存 `data.json` 文件。

### 第三步：刷新浏览器

在浏览器中刷新页面（F5 或 Cmd+R），即可看到更新后的数据和图表。

### 第四步：提交到 Git（可选）

如果需要保存版本历史：

```bash
cd /Users/wright/Documents/WFCode/GangGu-yizu
git add data.json
git commit -m "更新数据: 2026-01-22"
```

## 投资比例说明

### 操作方与投资方分配
- **操作方**：40%
- **投资方**：60%

### 投资方内部分配

#### 2025.12.09 之前的股票
- 雅男：25万（41.67%）
- 妍妍：15万（25%）
- 明华：10万（16.67%）
- 文博：10万（16.67%）

#### 2025.12.09 之后的股票（标记 `special_investors: true`）
- 雅男：0万（0%）- 已撤资
- 妍妍：15万（25%）
- 明华：10万（16.67%）
- 文博：35万（58.33%）- 追加投资

### 特殊股票列表
以下股票使用 2025.12.09 之后的投资比例：
- 翰思艾泰(100股)
- 英矽智能(500股)
- 壁仞科技(600股)
- minimax(100股)
- 兆易创新(100股)

## 收益计算逻辑

```
总成本 = 亏损股票总额 + 未中签股票认购费用
净收益 = 盈利股票总额 - 总成本

操作方收益 = 净收益 × 40%
投资方总收益 = 净收益 × 60%

每个投资方收益 = 按投资比例分配投资方总收益
```

**注意**：
- 盈利股票根据是否标记 `special_investors` 使用不同的投资比例
- 亏损和未中签费用始终按 2025.12.09 之前的原始投资比例分摊

## 修改密码

在 `data.json` 中修改 `password` 字段：

```json
"password": "新密码"
```

保存后，下次登录需要使用新密码。

## 文件说明

- **index.html** - 登录页面
- **report.html** - 主报表页面
- **report.js** - 业务逻辑和图表渲染
- **data.json** - 数据配置文件（唯一需要修改的文件）

## 常见问题

### Q: 修改数据后页面没有更新？
A: 尝试强制刷新浏览器（Ctrl+Shift+R 或 Cmd+Shift+R）清除缓存。

### Q: 如何添加新的投资人？
A: 需要修改 `data.json` 中的 `investors` 和 `special_investors` 数组，并相应修改 `report.js` 中的计算逻辑。

### Q: 数据格式错误怎么办？
A: 确保 JSON 格式正确，可以使用在线 JSON 验证工具检查。常见错误：
- 缺少逗号或多余逗号
- 数字不要加引号
- 最后一个元素后不要有逗号

### Q: 如何导出数据？
A: 可以直接复制 `data.json` 文件，或在浏览器中使用开发者工具查看计算结果。

## 技术栈

- HTML5 + CSS3
- JavaScript (ES6+)
- Bootstrap 5.3.0
- Chart.js 4.4.0
- SheetJS (XLSX)

## 联系方式

如有问题或需要功能扩展，请联系开发团队。
